<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DeezWeb - Favoris</title>
    <link rel="stylesheet" href="index.css">
</head>
<style>
    .musicFav {
        display: flex;
        flex-wrap: wrap
    }
    
    .buttonFav {
        background-color: red
    }
</style>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="search.html">Rechercher</a></li>
                <li><a href="fav.html">Mes favoris</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="musicFav">

        </section>
        <script src="node_modules/jquery/dist/jquery.min.js"></script>
        <script>

            // On affiche dans la page favori toutes les musiques conserv√©es dans le localStorage
            
            for (var i = 1; i < Object.keys(localStorage).length; i++) {
                    var valueFav = JSON.parse(localStorage.getItem(Object.keys(localStorage)[i]))
                    $('.musicFav').append("<div class='music-cartouche'><img src='" + valueFav[0] + "'></img><audio controls><source src='" + valueFav[1] + "'></audio><p>" + valueFav[2] + "</p><p>" + valueFav[3] + "</p><button class='buttonFav'>Fav<span class='hiddenInf'>music" + i + "</span></button></div>")
            }

            // Fontion pour retirer une musique des favori

            $('.musicFav').on('click', '.buttonFav', function () {
                localStorage.removeItem($(this).children('span').text());
                $(this).parent().remove()
            })
        </script>
    </main>
</body>

</html>